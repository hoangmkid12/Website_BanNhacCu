<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh Toán</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

</head>

<body class="bg-gray-50">
    <!-- Progress Bar -->
    <div class="fixed top-0 left-0 right-0 h-1 bg-gray-200">
        <div class="h-1 bg-blue-600 w-2/3 transition-all duration-500"></div>
    </div>

    <div class="container mx-auto px-4 py-12">
        <!-- Header với logo và các bước -->
        <div class="max-w-4xl mx-auto mb-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800">Thanh toán đơn hàng</h1>
                <div class="text-sm text-gray-500">
                    <i class="fas fa-lock mr-2"></i> Thanh toán bảo mật
                </div>
            </div>

            <!-- Các bước thanh toán -->
            <div class="flex justify-between items-center mb-12">
                <div class="flex-1 relative">
                    <div class="h-1 bg-blue-600"></div>
                    <div class="absolute top-0 transform -translate-y-1/2 left-0">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="mt-2 text-sm font-medium text-blue-600">Giỏ hàng</div>
                    </div>
                </div>
                <div class="flex-1 relative">
                    <div class="h-1 bg-blue-600"></div>
                    <div class="absolute top-0 transform -translate-y-1/2 left-1/2">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="mt-2 text-sm font-medium text-blue-600">Thông tin</div>
                    </div>
                </div>
                <div class="flex-1 relative">
                    <div class="h-1 bg-gray-300"></div>
                    <div class="absolute top-0 transform -translate-y-1/2 right-0">
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-white">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="mt-2 text-sm font-medium text-gray-500">Hoàn tất</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Form bên trái -->
                <div class="flex-1">
                    <form class="space-y-8">
                        <!-- Thông tin cá nhân -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                                <i class="fas fa-user-circle mr-3 text-blue-600"></i> Thông tin cá nhân
                            </h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Họ và tên đệm</label>
                                        <div class="relative">
                                            <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10">
                                            <i class="fas fa-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Tên</label>
                                        <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                        <div class="relative">
                                            <input type="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10">
                                            <i class="fas fa-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Số điện thoại</label>
                                        <div class="relative">
                                            <input type="tel" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10">
                                            <i class="fas fa-phone absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Địa chỉ giao hàng -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                                <i class="fas fa-shipping-fast mr-3 text-blue-600"></i> Địa chỉ giao hàng
                            </h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Địa chỉ chi tiết</label>
                                    <div class="relative">
                                        <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pl-10">
                                        <i class="fas fa-map-marker-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Tỉnh/Thành phố</label>
                                        <select required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white">
                                            <option value="">Chọn tỉnh/thành phố</option>
                                            <option value="hanoi">Hà Nội</option>
                                            <option value="hcm">TP. Hồ Chí Minh</option>
                                            <option value="danang">Đà Nẵng</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Quận/Huyện</label>
                                        <select required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white">
                                            <option value="">Chọn quận/huyện</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Phường/Xã</label>
                                        <select required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white">
                                            <option value="">Chọn phường/xã</option>
                                        </select>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Ghi chú giao hàng (không bắt buộc)</label>
                                    <textarea class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Ví dụ: Giao giờ hành chính, gọi trước khi giao..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Phương thức thanh toán -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
                                <i class="fas fa-credit-card mr-3 text-blue-600"></i> Phương thức thanh toán
                            </h2>
                            <div class="space-y-4">
                                <div class="relative">
                                    <input type="radio" name="payment" id="card" class="hidden peer">
                                    <label for="card" class="block p-4 border rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:bg-blue-50">
                                        <div class="flex items-center">
                                            <!-- Chỉnh kích thước hình ảnh nhỏ hơn -->
                                            <img src="../img/visa-mastercard-jcb.jpg" alt="Credit card icons" class="w-12 h-8 mr-3"> <!-- Giảm kích thước -->
                                            <div>
                                                <div class="font-medium">Thẻ tín dụng/ghi nợ</div>
                                                <div class="text-sm text-gray-500">Visa, Mastercard, JCB</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>

                                <div class="relative">
                                    <input type="radio" name="payment" id="banking" class="hidden peer">
                                    <label for="banking" class="block p-4 border rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:bg-blue-50">
                                        <div class="flex items-center">
                                            <!-- Chỉnh kích thước hình ảnh nhỏ hơn -->
                                            <img src="../img/chuyenkhoannganhang.jpg" alt="Banking icon" class="w-12 h-8 mr-3"> <!-- Giảm kích thước -->
                                            <div>
                                                <div class="font-medium">Chuyển khoản ngân hàng</div>
                                                <div class="text-sm text-gray-500">Hỗ trợ tất cả ngân hàng nội địa</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>

                                <div class="relative">
                                    <input type="radio" name="payment" id="cod" class="hidden peer">
                                    <label for="cod" class="block p-4 border rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:bg-blue-50">
                                        <div class="flex items-center">
                                            <!-- Chỉnh kích thước hình ảnh nhỏ hơn -->
                                            <img src="../img/shipcod.png" alt="COD icon" class="w-12 h-8 mr-3"> <!-- Giảm kích thước -->
                                            <div>
                                                <div class="font-medium">Thanh toán khi nhận hàng (COD)</div>
                                                <div class="text-sm text-gray-500">Thanh toán bằng tiền mặt</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Tổng quan đơn hàng bên phải -->
                <div class="lg:w-96">
                    <div class="bg-white p-6 rounded-xl shadow-sm sticky top-8">
                        <h2 class="text-xl font-semibold text-gray-800 mb-6">Tổng quan đơn hàng</h2>

                        <!-- Danh sách sản phẩm -->
                        <div class="space-y-4 mb-6" id="cart-items-container">
                            <!-- Sản phẩm sẽ được hiển thị tại đây -->
                        </div>

                        <!-- Mã giảm giá -->
                        <div class="border-t border-b py-4 mb-4">
                            <div class="flex items-center space-x-2">
                                <div class="flex-1">
                                    <input type="text" placeholder="Nhập mã giảm giá" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">Áp dụng</button>
                            </div>
                        </div>

                        <!-- Chi tiết thanh toán -->
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-gray-600">
                                <span>Tạm tính</span>
                                <span id="subtotal-price">0₫</span>
                                <!-- Thay đổi id từ "total-price" sang "subtotal-price" -->
                            </div>
                            <div class="flex justify-between font-semibold text-lg pt-3 border-t">
                                <span>Tổng cộng</span>
                                <span id="total-price" class="text-blue-600">0₫</span>
                                <!-- Giữ lại id này để tính toán tổng cộng -->
                            </div>
                        </div>

                        <!-- Nút thanh toán -->
                        <button type="submit" class="w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center justify-center">
                            <i class="fas fa-lock mr-2"></i>
                            Thanh toán
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast thông báo -->
    <div class="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-md flex items-center hidden" id="toast">
        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-3">
            <i class="fas fa-check text-green-500"></i>
        </div>
        <div>
            <div class="font-medium">Thanh toán thành công!</div>
            <div class="text-sm text-gray-500">Đơn hàng của bạn đang đợi xác nhận.</div>
        </div>
        <button class="ml-4 text-gray-400 hover:text-gray-500" onclick="hideToast()">
            <i class="fas fa-times"></i>
        </button>
    </div>


    <script>
        // Hiệu ứng khi chọn phương thức thanh toán
        document.querySelectorAll('input[name="payment"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('input[name="payment"]').forEach(r => {
                    const label = r.nextElementSibling;
                    if (r.checked) {
                        label.classList.add('border-blue-500', 'bg-blue-50');
                    } else {
                        label.classList.remove('border-blue-500', 'bg-blue-50');
                    }
                });
            });
        });

        // Hiệu ứng hover cho các nút
        const buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.classList.add('transform', 'scale-105');
            });
            button.addEventListener('mouseleave', function() {
                this.classList.remove('transform', 'scale-105');
            });
        });

        // Hiển thị toast khi submit form
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            const toast = document.getElementById('toast');
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        });
    </script>
    <script>
        function displayCartItems() {
            const cartItemsContainer = document.getElementById('cart-items-container');
            const subtotalPriceElement = document.getElementById('subtotal-price'); // Thêm biến cho "Tạm tính"
            const totalPriceElement = document.getElementById('total-price'); // Giữ lại cho "Tổng cộng"

            // Lấy dữ liệu từ localStorage và kiểm tra xem có dữ liệu không
            const cart = JSON.parse(localStorage.getItem('cart')) || [];

            cartItemsContainer.innerHTML = ''; // Xóa nội dung cũ

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p>Giỏ hàng của bạn đang trống.</p>';
                subtotalPriceElement.textContent = '0₫';
                totalPriceElement.textContent = '0₫';
                return;
            }

            let subtotalPrice = 0;

            // Duyệt qua từng sản phẩm và hiển thị
            cart.forEach(item => {
                const price = item.price || 0; // Kiểm tra nếu giá trị không hợp lệ thì mặc định là 0
                const quantity = item.quantity || 1; // Kiểm tra nếu số lượng không hợp lệ thì mặc định là 1
                const itemTotal = price * quantity;

                const cartItemDiv = document.createElement('div');
                cartItemDiv.className = 'flex items-center mb-4';

                cartItemDiv.innerHTML = `
            <img src="${item.image || ''}" alt="${item.name || 'Sản phẩm'}" class="w-16 h-16 rounded-lg">
            <div class="ml-4 flex-1">
                <div class="font-medium">${item.name || 'Sản phẩm không có tên'}</div>
                <div class="text-sm text-gray-500">Số lượng: ${quantity}</div>
            </div>
            <div class="font-medium">${itemTotal.toLocaleString()}₫</div>
        `;

                cartItemsContainer.appendChild(cartItemDiv);
                subtotalPrice += itemTotal; // Tính tổng giá
            });

            // Hiển thị "Tạm tính" và "Tổng cộng"
            subtotalPriceElement.textContent = `${subtotalPrice.toLocaleString()}₫`;
            totalPriceElement.textContent = `${subtotalPrice.toLocaleString()}₫`;
        }
        // Gọi hàm khi trang tải
        window.onload = function() {
            displayCartItems();
        };
    </script>
</body>

</html>